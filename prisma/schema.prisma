generator client {
  provider = "prisma-client-js"
}
 
datasource db {
  provider = "postgresql"
  url = env("POSTGRES_PRO_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_PRO_URL_NON_POOLING") // uses a direct connection
}
 
 enum Role {
  CLIENT
  DESIGNER
 }


model User {
  id        Int      @id @default(autoincrement())
  clerkId   String      @unique
  role     Role
  designer  Designer?
  client    Client?
}

model Designer {
  id       Int      @id @default(autoincrement())
  user    User     @relation(fields: [id], references: [id])
  collaboration Collaboration?
}

model Client {
  id       Int      @id @default(autoincrement())
  user    User     @relation(fields: [id], references: [id])
  proposal Proposal?
  collaboration Collaboration[]
}

model Proposal {
  id       Int      @id @default(autoincrement())
  clientId   Int          @unique
  title      String
  brief    String
  currentState    String
  redesignFix    String
  features    String
  usefulFeatures    String
  userDescription    String
  competitorDescription    String
  files    String[]

  client    Client   @relation(fields: [clientId], references: [id])

}
model Question {
  id       Int      @id @default(autoincrement())
  title      String
  question    String
  toolTip    String
}

model Collaboration {
  id         Int      @id @default(autoincrement())
  designerId     Int      @unique
  clientId   Int          @unique
  status     String
  linkToDesign   String

  client    Client   @relation(fields: [clientId], references: [id])
  designer  Designer @relation(fields: [designerId], references: [id])
  
}